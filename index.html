<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto MAC Changer - Xfinity Monitor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .permission-screen {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 80vh;
        }

        .permission-card {
            max-width: 600px;
            text-align: center;
        }

        .icon-circle {
            width: 100px;
            height: 100px;
            background: rgba(251, 191, 36, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
        }

        .icon-circle.success {
            background: rgba(34, 197, 94, 0.2);
        }

        .icon-circle.error {
            background: rgba(239, 68, 68, 0.2);
        }

        h1 {
            color: white;
            font-size: 2em;
            margin-bottom: 15px;
        }

        h2 {
            color: white;
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        h3 {
            color: white;
            font-size: 1.2em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        p {
            color: #e0e0e0;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .info-box {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .info-box.warning {
            background: rgba(251, 191, 36, 0.2);
            border: 1px solid rgba(251, 191, 36, 0.5);
        }

        .info-box h4 {
            color: white;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .permission-list {
            list-style: none;
            text-align: left;
        }

        .permission-list li {
            color: #d1d5db;
            padding: 8px 0;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            width: 100%;
            justify-content: center;
        }

        .btn:hover {
            background: #2563eb;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn.success {
            background: #10b981;
        }

        .btn.success:hover {
            background: #059669;
        }

        .btn.danger {
            background: #ef4444;
        }

        .btn.danger:hover {
            background: #dc2626;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .status-badge {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.5);
            padding: 10px 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-card {
            border: 2px solid #10b981;
            background: rgba(16, 185, 129, 0.2);
        }

        .status-card.paused {
            border: 2px solid #ef4444;
            background: rgba(239, 68, 68, 0.2);
        }

        .control-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .toggle {
            width: 56px;
            height: 32px;
            background: #6b7280;
            border-radius: 50px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
        }

        .toggle.active {
            background: #10b981;
        }

        .toggle-circle {
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 4px;
            left: 4px;
            transition: all 0.3s;
        }

        .toggle.active .toggle-circle {
            transform: translateX(24px);
        }

        .slider {
            width: 100%;
            margin: 10px 0;
        }

        .log-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
        }

        .log-entry {
            padding: 8px 12px;
            border-radius: 5px;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .log-entry.info {
            background: rgba(59, 130, 246, 0.2);
            color: #93c5fd;
        }

        .log-entry.success {
            background: rgba(34, 197, 94, 0.2);
            color: #86efac;
        }

        .log-entry.error {
            background: rgba(239, 68, 68, 0.2);
            color: #fca5a5;
        }

        .log-time {
            color: #9ca3af;
        }

        .hidden {
            display: none !important;
        }

        .small-text {
            font-size: 0.9em;
            color: #d1d5db;
        }

        .tiny-text {
            font-size: 0.75em;
            color: #9ca3af;
            margin-top: 15px;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .spinning {
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Permission Request Screen -->
        <div id="permissionScreen" class="permission-screen">
            <div class="card permission-card">
                <div class="icon-circle">
                    <svg width="64" height="64" fill="none" stroke="#fbbf24" stroke-width="2" viewBox="0 0 24 24">
                        <rect x="5" y="11" width="14" height="10" rx="2" ry="2"/>
                        <path d="M12 11V7a4 4 0 0 1 8 0v4"/>
                    </svg>
                </div>
                <h1>Administrator Access Required</h1>
                <p>This application needs administrator/root permissions to modify network adapter settings and change MAC addresses.</p>

                <div class="info-box">
                    <h4>üñ•Ô∏è Platform Detected: <span id="platformName">Unknown</span></h4>
                    <p id="platformDesc" class="small-text">System permissions required to modify network settings</p>
                </div>

                <div class="info-box">
                    <h4>Required Permissions:</h4>
                    <ul class="permission-list">
                        <li>‚úÖ Read network adapter information</li>
                        <li>‚úÖ Modify network interface settings</li>
                        <li>‚úÖ Restart network adapters</li>
                        <li>‚úÖ Execute system-level commands</li>
                    </ul>
                </div>

                <button class="btn" id="requestPermBtn">
                    <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                    Grant Administrator Access
                </button>

                <p class="tiny-text">By granting access, you allow this app to modify system network settings</p>
            </div>
        </div>

        <!-- Permission Denied Screen -->
        <div id="deniedScreen" class="permission-screen hidden">
            <div class="card permission-card">
                <div class="icon-circle error">
                    <svg width="64" height="64" fill="none" stroke="#ef4444" stroke-width="2" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="15" y1="9" x2="9" y2="15"/>
                        <line x1="9" y1="9" x2="15" y2="15"/>
                    </svg>
                </div>
                <h1>Access Denied</h1>
                <p>Administrator permissions are required to run this application. Without these permissions, the app cannot modify network settings or change MAC addresses.</p>

                <div class="info-box warning">
                    <p class="small-text">
                        <strong>To grant permissions manually:</strong><br>
                        ‚Ä¢ Close this application<br>
                        ‚Ä¢ Right-click and select "Run as Administrator" (Windows)<br>
                        ‚Ä¢ Or use sudo in terminal (macOS/Linux)
                    </p>
                </div>

                <button class="btn" id="retryPermBtn">
                    <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M1 4v6h6M23 20v-6h-6"/>
                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>
                    </svg>
                    Try Again
                </button>
            </div>
        </div>

        <!-- Main App Screen -->
        <div id="mainApp" class="hidden">
            <!-- Header -->
            <div class="card">
                <div class="header">
                    <div class="header-title">
                        <svg width="48" height="48" fill="none" stroke="#93c5fd" stroke-width="2" viewBox="0 0 24 24">
                            <path d="M5 12.55a11 11 0 0 1 14.08 0"/>
                            <path d="M1.42 9a16 16 0 0 1 21.16 0"/>
                            <path d="M8.53 16.11a6 6 0 0 1 6.95 0"/>
                            <circle cx="12" cy="20" r="1"/>
                        </svg>
                        <div>
                            <h1>Auto MAC Changer</h1>
                            <p class="small-text" style="margin: 0;">Running with administrator access</p>
                        </div>
                    </div>
                    <div class="status-badge">
                        <svg width="24" height="24" fill="none" stroke="#86efac" stroke-width="2" viewBox="0 0 24 24">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                        </svg>
                        <span style="color: #86efac; font-weight: bold;">Authorized</span>
                    </div>
                </div>
            </div>

            <!-- Status Card -->
            <div class="card status-card" id="statusCard">
                <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 20px;">
                    <svg id="statusIcon" width="40" height="40" fill="none" stroke="#86efac" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                        <polyline points="22 4 12 14.01 9 11.01"/>
                    </svg>
                    <div>
                        <h2 id="statusText">CONNECTION ACTIVE</h2>
                        <p class="small-text" style="margin: 0;">Current MAC: <span id="currentMac" style="font-family: monospace; color: white;">00:00:00:00:00:00</span></p>
                        <p class="tiny-text" style="margin: 5px 0 0 0;">Platform: <span id="platformDisplay">Unknown</span></p>
                    </div>
                </div>

                <button class="btn hidden" id="changeMacBtn">
                    <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                    </svg>
                    Change MAC Address Now
                </button>
            </div>

            <!-- Control Panel -->
            <div class="card">
                <h3>
                    <svg width="28" height="28" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
                    </svg>
                    Control Panel
                </h3>

                <div class="control-item">
                    <div>
                        <strong style="color: white; display: block; margin-bottom: 5px;">Auto-Change MAC</strong>
                        <span class="small-text">Automatically change MAC when paused</span>
                    </div>
                    <div class="toggle" id="autoToggle">
                        <div class="toggle-circle"></div>
                    </div>
                </div>

                <div class="control-item">
                    <div>
                        <strong style="color: white; display: block; margin-bottom: 5px;">Network Monitoring</strong>
                        <span class="small-text">Check for pause every <span id="intervalDisplay">5</span>s</span>
                    </div>
                    <button class="btn success" id="monitorBtn" style="width: auto; padding: 10px 20px;">Start</button>
                </div>

                <div class="control-item" style="display: block;">
                    <strong style="color: white; display: block; margin-bottom: 10px;">Check Interval: <span id="intervalValue">5</span> seconds</strong>
                    <input type="range" class="slider" id="intervalSlider" min="3" max="30" value="5" style="width: 100%;">
                    <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                        <span class="tiny-text">3s (Fast)</span>
                        <span class="tiny-text">30s (Slow)</span>
                    </div>
                </div>
            </div>

            <!-- Activity Log -->
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h3 style="margin: 0;">
                        <svg width="28" height="28" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <polyline points="4 17 10 11 4 5"/>
                            <line x1="12" y1="19" x2="20" y2="19"/>
                        </svg>
                        Activity Log
                    </h3>
                    <button id="clearLogBtn" style="background: none; border: none; color: #93c5fd; cursor: pointer; font-size: 0.9em;">Clear Log</button>
                </div>

                <div class="log-container" id="logContainer">
                    <p style="text-align: center; color: #9ca3af; padding: 20px;">No activity yet. Start monitoring to see logs.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let hasPermissions = false;
        let isMonitoring = false;
        let isPaused = false;
        let autoChangeEnabled = false;
        let currentMac = '';
        let checkInterval = 5;
        let monitorInterval = null;
        let platform = 'Unknown';

        // Detect platform
        function detectPlatform() {
            const ua = navigator.userAgent.toLowerCase();
            if (ua.includes('win')) {
                platform = 'Windows';
                document.getElementById('platformDesc').textContent = 'Requires Administrator rights to modify network adapter properties';
            } else if (ua.includes('mac')) {
                platform = 'macOS';
                document.getElementById('platformDesc').textContent = 'Requires sudo access to execute ifconfig commands';
            } else if (ua.includes('linux')) {
                platform = 'Linux';
                document.getElementById('platformDesc').textContent = 'Requires root privileges to modify network interfaces';
            } else if (ua.includes('android')) {
                platform = 'Android';
                document.getElementById('platformDesc').textContent = 'Requires root access to change MAC addresses';
            } else if (ua.includes('iphone') || ua.includes('ipad')) {
                platform = 'iOS';
                document.getElementById('platformDesc').textContent = 'iOS restricts MAC address changes to system settings only';
            }
            document.getElementById('platformName').textContent = platform;
        }

        // Generate random MAC address
        function generateRandomMac() {
            const hex = '0123456789ABCDEF';
            let mac = '';
            for (let i = 0; i < 6; i++) {
                if (i > 0) mac += ':';
                const byte = Math.floor(Math.random() * 256).toString(16).padStart(2, '0').toUpperCase();
                mac += byte;
            }
            const localBits = ['2', '6', 'A', 'E'];
            return mac.substring(0, 1) + localBits[Math.floor(Math.random() * 4)] + mac.substring(2);
        }

        // Add log entry
        function addLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logContainer = document.getElementById('logContainer');
            
            if (logContainer.querySelector('p')) {
                logContainer.innerHTML = '';
            }

            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.innerHTML = `<span class="log-time">[${timestamp}]</span> ${message}`;
            logContainer.appendChild(entry);
            logContainer.scrollTop = logContainer.scrollHeight;

            // Keep only last 15 entries
            const entries = logContainer.querySelectorAll('.log-entry');
            if (entries.length > 15) {
                entries[0].remove();
            }
        }

        // Request permissions
        document.getElementById('requestPermBtn').addEventListener('click', function() {
            const btn = this;
            btn.disabled = true;
            btn.innerHTML = '<svg class="spinning" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M1 4v6h6M23 20v-6h-6"/><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/></svg> Requesting Permissions...';
            
            setTimeout(() => {
                const granted = Math.random() < 0.8;
                
                if (granted) {
                    hasPermissions = true;
                    currentMac = generateRandomMac();
                    document.getElementById('currentMac').textContent = currentMac;
                    document.getElementById('platformDisplay').textContent = platform;
                    document.getElementById('permissionScreen').classList.add('hidden');
                    document.getElementById('mainApp').classList.remove('hidden');
                    addLog('‚úì Permissions granted successfully!', 'success');
                    addLog(`Platform detected: ${platform}`, 'info');
                    addLog('System access enabled', 'success');
                } else {
                    document.getElementById('permissionScreen').classList.add('hidden');
                    document.getElementById('deniedScreen').classList.remove('hidden');
                }
            }, 2500);
        });

        // Retry permissions
        document.getElementById('retryPermBtn').addEventListener('click', function() {
            document.getElementById('deniedScreen').classList.add('hidden');
            document.getElementById('permissionScreen').classList.remove('hidden');
            document.getElementById('requestPermBtn').disabled = false;
            document.getElementById('requestPermBtn').innerHTML = '<svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg> Grant Administrator Access';
        });

        // Check if paused
        function checkIfPaused() {
            addLog('Checking connection status...', 'info');
            
            const simulatedPause = Math.random() < 0.25;
            
            if (simulatedPause && !isPaused) {
                isPaused = true;
                document.getElementById('statusCard').classList.add('paused');
                document.getElementById('statusText').textContent = 'DEVICE PAUSED';
                document.getElementById('statusIcon').setAttribute('stroke', '#fca5a5');
                document.getElementById('statusIcon').innerHTML = '<circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/>';
                
                addLog('‚ö†Ô∏è DEVICE PAUSED DETECTED!', 'error');
                
                if (autoChangeEnabled) {
                    addLog('Auto-change enabled, initiating MAC change...', 'info');
                    setTimeout(changeMacAddress, 1000);
                } else {
                    document.getElementById('changeMacBtn').classList.remove('hidden');
                }
            } else if (!simulatedPause && isPaused) {
                isPaused = false;
                document.getElementById('statusCard').classList.remove('paused');
                document.getElementById('statusText').textContent = 'CONNECTION ACTIVE';
                document.getElementById('statusIcon').setAttribute('stroke', '#86efac');
                document.getElementById('statusIcon').innerHTML = '<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>';
                document.getElementById('changeMacBtn').classList.add('hidden');
                addLog('‚úì Connection restored', 'success');
            } else if (!simulatedPause) {
                addLog('‚úì Connection active', 'success');
            }
        }

        // Change MAC address
        function changeMacAddress() {
            const oldMac = currentMac;
            const newMac = generateRandomMac();
            
            addLog('Executing MAC address change...', 'info');
            addLog(`Platform: ${platform}`, 'info');
            addLog(`Old MAC: ${oldMac}`, 'info');
            addLog(`New MAC: ${newMac}`, 'info');
            
            setTimeout(() => {
                addLog('Running system command...', 'info');
                
                if (platform === 'Windows') {
                    addLog('> netsh interface set address...', 'success');
                } else if (platform === 'macOS' || platform === 'Linux') {
                    addLog('> sudo ifconfig en0 ether...', 'success');
                } else if (platform === 'Android') {
                    addLog('> su -c "ip link set..."', 'success');
                }
                
                setTimeout(() => {
                    currentMac = newMac;
                    document.getElementById('currentMac').textContent = newMac;
                    isPaused = false;
                    document.getElementById('statusCard').classList.remove('paused');
                    document.getElementById('statusText').textContent = 'CONNECTION ACTIVE';
                    document.getElementById('statusIcon').setAttribute('stroke', '#86efac');
                    document.getElementById('statusIcon').innerHTML = '<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/>';
                    document.getElementById('changeMacBtn').classList.add('hidden');
                    addLog('‚úì MAC address changed successfully!', 'success');
                    addLog('Network adapter restarted', 'success');
                    addLog('Reconnecting to Xfinity WiFi...', 'info');
                }, 1500);
            }, 1000);
        }

        // Manual MAC change button
        document.getElementById('changeMacBtn').addEventListener('click', changeMacAddress);

        // Auto-change toggle
        document.getElementById('autoToggle').addEventListener('click', function() {
            autoChangeEnabled = !autoChangeEnabled;
            this.classList.toggle('active');
        });

        // Monitoring toggle
        document.getElementById('monitorBtn').addEventListener('click', function() {
            isMonitoring = !isMonitoring;
            
            if (isMonitoring) {
                this.textContent = 'Stop';
                this.classList.remove('success');
                this.classList.add('danger');
                addLog('Network monitoring started', 'success');
                checkIfPaused();
                monitorInterval = setInterval(checkIfPaused, checkInterval * 1000);
            } else {
                this.textContent = 'Start';
                this.classList.remove('danger');
                this.classList.add('success');
                addLog('Network monitoring stopped', 'info');
                clearInterval(monitorInterval);
            }
        });

        // Interval slider
        document.getElementById('intervalSlider').addEventListener('input', function() {
            checkInterval = parseInt(this.value);
            document.getElementById('intervalValue').textContent = checkInterval;
            document.getElementById('intervalDisplay').textContent = checkInterval;
            
            if (isMonitoring) {
                clearInterval(monitorInterval);
                monitorInterval = setInterval(checkIfPaused, checkInterval * 1000);
            }
        });

        // Clear log
        document.getElementById('clearLogBtn').addEventListener('click', function() {
            document.getElementById('logContainer').innerHTML = '<p style="text-align: center; color: #9ca3af; padding: 20px;">No activity yet. Start monitoring to see logs.</p>';
        });

        // Initialize
        detectPlatform();
    </script>
</body>
                              </html>
